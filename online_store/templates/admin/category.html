{% extends "admin/base.html" %}
{% block title %}Categories{% endblock %}
{% block head %}
{{ super() }}

<script src="https://unpkg.com/axios/dist/axios.min.js" defer></script>
<script type="text/javascript" src="{{ url_for('static', filename='delete-category.js') }}" defer></script>

{% endblock %}

{% block content %}
<div class="categories">
  <div class="category-list">
    {% for category in categories %}
    <div class="category-item">
      <form class="update" method="POST">
        {{ update_form.hidden_tag() }}
        {% if update_form.name.errors %}
          {{ update_form.name(class="is-invalid") }}
          <div class="invalid-feedback">
            {% for error in update_form.name.errors %}
              {{ error }}
            {% endfor %}
          </div>
        {% else %}
          {{ update_form.name(value=category) }}
        {% endif %}
        {{ update_form.submit }}
      </form>
      <button class="delete" type="button" onclick="deleteCategory({{ category.id }})">Delete</button>
    </div>
    {% endfor %}
  </div>
  <form class="full-form" method="POST">
    {{ add_form.hidden_tag() }}
    <fieldset>
      <div>
        {{ add_form.name.label }}
        {% if add_form.name.errors %}
          {{ add_form.name(class="is-invalid") }}
          <div class="invalid-feedback">
            {% for error in add_form.name.errors %}
              {{ error }}
            {% endfor %}
          </div>
        {% else %}
          {{ add_form.name }}
        {% endif %}
      </div>
    </fieldset>
    <div>
      {{ add_form.submit }}
    </div>
  </form>
</div>
{% endblock %}
